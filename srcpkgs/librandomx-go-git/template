# Template file for 'librandomx-go-git'
pkgname=librandomx-go-git
version=1.1.8
revision=4
short_desc="Wrapper for working with RandomX from Go applications"
maintainer="Kevin Crumb <kevcrumb@splitlinux.org>"
license="BSD-3-Clause"
homepage="https://github.com/cryptonote-social/RandomX"
hostmakedepends="pkg-config git"

do_fetch() {
	git clone git://github.com/cryptonote-social/RandomX.git $wrksrc
	cd $wrksrc
	git reset --hard 0ff2e9af8c122df9f234e509c99bfa5fa33a9fa4
}

do_build() {
	cd rxlib
	CFLAGS="-std=c++11 -D_GNU_SOURCE -fPIC -I../src -O3"
	c++ $CFLAGS -c rxlib.cpp -o rxlib.cpp.o
}

do_install() {
	vinstall rxlib/rxlib.cpp.o 644 usr/lib/
	vinstall rxlib/rxlib.h 644 usr/include/
}
